# GetX å¤šè¯­è¨€å›½é™…åŒ–ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨ GetX æ¡†æ¶å®ç°å¤šè¯­è¨€å›½é™…åŒ–åŠŸèƒ½ï¼Œæ”¯æŒä¸­æ–‡ç®€ä½“å’Œè‹±æ–‡ä¸¤ç§è¯­è¨€ï¼Œå¯ä»¥è½»æ¾æ‰©å±•æ›´å¤šè¯­è¨€ã€‚

## æ–‡ä»¶ç»“æ„

```
lib/
â”œâ”€â”€ translations/
â”‚   â””â”€â”€ app_translations.dart        # ç¿»è¯‘é…ç½®æ–‡ä»¶
â”œâ”€â”€ controller/
â”‚   â””â”€â”€ language_controller.dart     # è¯­è¨€æ§åˆ¶å™¨
â”œâ”€â”€ basics/
â”‚   â””â”€â”€ language_utils.dart          # å¤šè¯­è¨€å·¥å…·ç±»
â””â”€â”€ view/
    â”œâ”€â”€ settings/
    â”‚   â””â”€â”€ language_selection_page.dart  # è¯­è¨€é€‰æ‹©é¡µé¢
    â””â”€â”€ demo/
        â””â”€â”€ language_demo_page.dart       # è¯­è¨€æ¼”ç¤ºé¡µé¢
```

## åŸºæœ¬ä½¿ç”¨

### 1. åœ¨ Widget ä¸­ä½¿ç”¨ç¿»è¯‘æ–‡æœ¬

```dart
// åŸºæœ¬ç¿»è¯‘
Text('confirm'.tr)

// å¸¦å‚æ•°çš„ç¿»è¯‘
Text('welcome_message'.trArgs(['ç”¨æˆ·å']))

// å¤æ•°å½¢å¼
Text('item_count'.trPlural(count.toString()))
```

### 2. åœ¨ä»£ç ä¸­æ£€æŸ¥å½“å‰è¯­è¨€

```dart
// ä½¿ç”¨å·¥å…·ç±»
if (LanguageUtils.isChinese()) {
  // ä¸­æ–‡é€»è¾‘
} else if (LanguageUtils.isEnglish()) {
  // è‹±æ–‡é€»è¾‘
}

// è·å–å½“å‰è¯­è¨€ä»£ç 
String langCode = LanguageUtils.getCurrentLanguageCode(); // 'zh' æˆ– 'en'
```

### 3. æ ¼å¼åŒ–æ—¥æœŸæ—¶é—´

```dart
// æœ¬åœ°åŒ–æ—¥æœŸæ—¶é—´æ ¼å¼
String formattedDate = LanguageUtils.formatDateTime(DateTime.now());
// ä¸­æ–‡: 2024å¹´3æœˆ15æ—¥ 14:30
// è‹±æ–‡: Mar 15, 2024 14:30

// ç›¸å¯¹æ—¶é—´
String relativeTime = LanguageUtils.getRelativeTime(someDate);
// ä¸­æ–‡: æ˜¨å¤©ã€æœ¬å‘¨ã€æœ¬æœˆ
// è‹±æ–‡: Yesterday, This Week, This Month
```

### 4. åˆ‡æ¢è¯­è¨€

```dart
// è·å–è¯­è¨€æ§åˆ¶å™¨
final languageController = Get.find<LanguageController>();

// åˆ‡æ¢åˆ°ä¸­æ–‡
languageController.changeLanguage('zh', 'CN');

// åˆ‡æ¢åˆ°è‹±æ–‡
languageController.changeLanguage('en', 'US');

// è·³è½¬åˆ°è¯­è¨€é€‰æ‹©é¡µé¢
Get.to(() => const LanguageSelectionPage());
```

## æ·»åŠ æ–°è¯­è¨€

### 1. åœ¨ç¿»è¯‘é…ç½®ä¸­æ·»åŠ è¯­è¨€

ç¼–è¾‘ `lib/translations/app_translations.dart`ï¼š

```dart
Map<String, Map<String, String>> get keys => {
  'zh_CN': {
    'hello': 'ä½ å¥½',
    // ... å…¶ä»–ä¸­æ–‡ç¿»è¯‘
  },
  'en_US': {
    'hello': 'Hello',
    // ... å…¶ä»–è‹±æ–‡ç¿»è¯‘
  },
  'ja_JP': {  // æ–°å¢æ—¥è¯­
    'hello': 'ã“ã‚“ã«ã¡ã¯',
    // ... å…¶ä»–æ—¥è¯­ç¿»è¯‘
  },
};
```

### 2. åœ¨è¯­è¨€æ§åˆ¶å™¨ä¸­æ·»åŠ æ”¯æŒ

ç¼–è¾‘ `lib/controller/language_controller.dart`ï¼š

```dart
final List<LanguageModel> supportedLanguages = [
  LanguageModel(
    languageCode: 'zh',
    countryCode: 'CN',
    languageName: 'ä¸­æ–‡ç®€ä½“',
    flag: 'ğŸ‡¨ğŸ‡³',
  ),
  LanguageModel(
    languageCode: 'en',
    countryCode: 'US',
    languageName: 'English',
    flag: 'ğŸ‡ºğŸ‡¸',
  ),
  LanguageModel(  // æ–°å¢æ—¥è¯­æ”¯æŒ
    languageCode: 'ja',
    countryCode: 'JP',
    languageName: 'æ—¥æœ¬èª',
    flag: 'ğŸ‡¯ğŸ‡µ',
  ),
];
```

### 3. æ›´æ–°å·¥å…·ç±»ï¼ˆå¯é€‰ï¼‰

å¦‚æœæ–°è¯­è¨€éœ€è¦ç‰¹æ®Šå¤„ç†ï¼Œå¯ä»¥åœ¨ `lib/basics/language_utils.dart` ä¸­æ·»åŠ ç›¸åº”æ–¹æ³•ï¼š

```dart
/// åˆ¤æ–­æ˜¯å¦ä¸ºæ—¥è¯­
static bool isJapanese() {
  return getCurrentLanguageCode() == 'ja';
}
```

## ç¿»è¯‘æ–‡æœ¬ç®¡ç†

### å‘½åè§„èŒƒ

- ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”çš„å°å†™å­—æ¯ï¼š`user_name`
- æŒ‰åŠŸèƒ½æ¨¡å—åˆ†ç»„ï¼š`login_title`, `login_button`
- é”™è¯¯ä¿¡æ¯ç»Ÿä¸€å‰ç¼€ï¼š`error_network`, `error_permission`
- æˆåŠŸä¿¡æ¯ç»Ÿä¸€å‰ç¼€ï¼š`success_save`, `success_delete`

### å¸¸ç”¨ç¿»è¯‘ Key

#### é€šç”¨æ“ä½œ
- `confirm` - ç¡®è®¤
- `cancel` - å–æ¶ˆ
- `save` - ä¿å­˜
- `delete` - åˆ é™¤
- `edit` - ç¼–è¾‘
- `add` - æ·»åŠ 
- `search` - æœç´¢
- `loading` - åŠ è½½ä¸­...
- `no_data` - æš‚æ— æ•°æ®

#### å‰ªè—åŠŸèƒ½
- `clip` - å‰ªè—
- `clips` - å‰ªè—
- `add_clip` - æ·»åŠ å‰ªè—
- `clip_list` - å‰ªè—åˆ—è¡¨
- `clip_title` - æ ‡é¢˜
- `clip_content` - å†…å®¹

#### æ—¶é—´ç›¸å…³
- `today` - ä»Šå¤©
- `yesterday` - æ˜¨å¤©
- `this_week` - æœ¬å‘¨
- `this_month` - æœ¬æœˆ

## æœ€ä½³å®è·µ

### 1. é¿å…ç¡¬ç¼–ç æ–‡æœ¬

âŒ é”™è¯¯åšæ³•ï¼š
```dart
Text('ä¿å­˜')  // ç¡¬ç¼–ç ä¸­æ–‡
```

âœ… æ­£ç¡®åšæ³•ï¼š
```dart
Text('save'.tr)  // ä½¿ç”¨ç¿»è¯‘é”®
```

### 2. å¤„ç†é•¿æ–‡æœ¬

å¯¹äºè¾ƒé•¿çš„æ–‡æœ¬ï¼Œå»ºè®®ä½¿ç”¨ç®€çŸ­çš„é”®åï¼š
```dart
'welcome_description': 'æ¬¢è¿ä½¿ç”¨ Clipora å‰ªè—åº”ç”¨ï¼Œè¿™é‡Œå¯ä»¥å¸®åŠ©æ‚¨...',
```

### 3. å‚æ•°åŒ–ç¿»è¯‘

å½“æ–‡æœ¬åŒ…å«å˜é‡æ—¶ï¼Œä½¿ç”¨å‚æ•°åŒ–ç¿»è¯‘ï¼š
```dart
// ç¿»è¯‘æ–‡ä»¶ä¸­
'welcome_user': 'æ¬¢è¿ï¼Œ@nameï¼',
'welcome_user': 'Welcome, @name!',

// ä½¿ç”¨æ—¶
Text('welcome_user'.trArgs([userName]))
```

### 4. æµ‹è¯•å¤šè¯­è¨€

- ç¡®ä¿æ‰€æœ‰ç•Œé¢éƒ½æœ‰ç›¸åº”çš„ç¿»è¯‘
- æµ‹è¯•æ–‡æœ¬åœ¨ä¸åŒè¯­è¨€ä¸‹çš„å¸ƒå±€æ•ˆæœ
- æ³¨æ„ä¸åŒè¯­è¨€çš„æ–‡æœ¬é•¿åº¦å·®å¼‚

## æ³¨æ„äº‹é¡¹

1. **è¯­è¨€æŒä¹…åŒ–**ï¼šè¯­è¨€è®¾ç½®ä¼šè‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨ï¼Œåº”ç”¨é‡å¯åä¼šæ¢å¤ç”¨æˆ·çš„è¯­è¨€é€‰æ‹©ã€‚

2. **ç³»ç»Ÿè¯­è¨€æ£€æµ‹**ï¼šé¦–æ¬¡å®‰è£…æ—¶ä¼šæ£€æµ‹ç³»ç»Ÿè¯­è¨€ï¼Œæ”¯æŒçš„è¯­è¨€ä¼šè‡ªåŠ¨è®¾ç½®ï¼Œä¸æ”¯æŒçš„è¯­è¨€å°†é»˜è®¤ä½¿ç”¨ä¸­æ–‡ã€‚

3. **å®æ—¶åˆ‡æ¢**ï¼šè¯­è¨€åˆ‡æ¢åç«‹å³ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯åº”ç”¨ã€‚

4. **å›é€€æœºåˆ¶**ï¼šå¦‚æœæŸä¸ªç¿»è¯‘ä¸å­˜åœ¨ï¼Œä¼šä½¿ç”¨ `fallbackLocale`ï¼ˆä¸­æ–‡ï¼‰ä½œä¸ºå›é€€ã€‚

5. **æ€§èƒ½è€ƒè™‘**ï¼šç¿»è¯‘æ–‡æœ¬ä¼šç¼“å­˜åœ¨å†…å­˜ä¸­ï¼Œä¸ä¼šå½±å“åº”ç”¨æ€§èƒ½ã€‚

## æ¼”ç¤ºé¡µé¢

è¿è¡Œåº”ç”¨åï¼Œå¯ä»¥è®¿é—® `LanguageDemoPage` æŸ¥çœ‹å¤šè¯­è¨€åŠŸèƒ½çš„æ¼”ç¤ºæ•ˆæœï¼ŒåŒ…æ‹¬ï¼š
- å½“å‰è¯­è¨€æ˜¾ç¤º
- åŸºæœ¬ç¿»è¯‘ç¤ºä¾‹
- æ—¶é—´æ—¥æœŸæ ¼å¼åŒ–
- è¯­è¨€åˆ‡æ¢åŠŸèƒ½

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç¿»è¯‘ä¸ç”Ÿæ•ˆ**
   - æ£€æŸ¥ç¿»è¯‘é”®æ˜¯å¦å­˜åœ¨äº `app_translations.dart` ä¸­
   - ç¡®è®¤è¯­è¨€ä»£ç æ ¼å¼æ­£ç¡®ï¼ˆå¦‚ï¼š`zh_CN`, `en_US`ï¼‰

2. **åˆ‡æ¢è¯­è¨€åéƒ¨åˆ†æ–‡æœ¬æœªæ›´æ–°**
   - ç¡®ä¿é¡µé¢ä½¿ç”¨äº† `Obx()` åŒ…è£…éœ€è¦å“åº”çš„ Widget
   - æ£€æŸ¥æ˜¯å¦æœ‰ç¡¬ç¼–ç æ–‡æœ¬æœªä½¿ç”¨ `.tr` æ–¹æ³•

3. **ç³»ç»Ÿè¯­è¨€æ£€æµ‹å¤±è´¥**
   - æ£€æŸ¥è®¾å¤‡è¯­è¨€è®¾ç½®
   - ç¡®è®¤è¯¥è¯­è¨€æ˜¯å¦åœ¨æ”¯æŒåˆ—è¡¨ä¸­

æœ‰é—®é¢˜è¯·æŸ¥çœ‹ç›¸å…³ä»£ç æ–‡ä»¶æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚ 